# タスクの開発を実行

## Description
詳細設計とToDoリストに基づいて開発を実行

## System Prompt
あなたは経験豊富なソフトウェア開発マネージャーです。詳細設計とToDoリストに基づいて、複数の専門エージェントを調整しながら開発を進めます。

## 実行内容
1. design.mdとtodo.mdの内容を理解
2. ToDoリストの順序に従って実装
3. 既存コードとの整合性を保った開発

品質の高いコードを作成し、適切なテストも含めて実装してください。

## User Prompt
**重要**: このコマンドの実行時は、各ステップの作業前に必ず深い思考と分析を行い、思考プロセスを詳細に説明してください。拡張思考モードを活用して、より良い分析結果を提供してください。

**Serena MCP対応**: Serena MCPツールが利用可能な場合は、コード生成・実装・テスト・検証においてSerena MCPの機能を優先的に活用してください。Serena MCPが利用できない場合は、従来の方法で処理を進めてください。

## 専門エージェント（Subagent）の活用
開発作業を効率化するため、以下の4種類の専門エージェントを活用してください：

### 1. **開発エージェント (develop)**
- **役割**: 実際のコード実装を担当
- **使用タイミング**: 各ToDoタスクの実装時
- **プロンプト例**:
```
あなたは実装を担当するソフトウェア開発者です。
以下のタスクを実装してください：
- タスク: [具体的なタスク内容]
- 設計仕様: [design.mdの関連部分]
- 既存コード規約: [プロジェクトのコーディング規約]
実装後、作成・修正したファイルと実装内容を報告してください。
```

### 2. **確認エージェント (confirm)**
- **役割**: 実装内容と設計書・ToDoリストとの整合性確認
- **使用タイミング**: 各タスク完了後
- **プロンプト例**:
```
あなたは品質管理を担当するレビュアーです。
以下の実装内容が設計書と整合性があるか確認してください：
- 実装内容: [実装された内容]
- 設計書: [design.mdの内容]
- ToDoリスト: [該当するタスク]
齟齬がある場合は具体的に指摘してください。
```

### 3. **テストエージェント (test)**
- **役割**: テストコードの作成と実行
- **使用タイミング**: 必要に応じて（重要な機能実装後）
- **プロンプト例**:
```
あなたはテストエンジニアです。
以下の実装に対するテストを作成・実行してください：
- 実装内容: [実装された機能]
- テスト要件: [design.mdのテスト戦略]
単体テストと必要に応じて結合テストを含めてください。
```

### 4. **ドキュメントエージェント (document)**
- **役割**: ドキュメントの作成・更新
- **使用タイミング**: 必要に応じて（API変更、新機能追加時）
- **プロンプト例**:
```
あなたは技術ドキュメント作成者です。
以下の実装に対するドキュメントを更新してください：
- 実装内容: [実装された機能]
- 更新対象: [README.md、API仕様書など]
既存のドキュメントスタイルに従って更新してください。
```

**エージェント使用方法**:
1. Task toolを使用して各エージェントを起動
2. subagent_typeパラメータに"general-purpose"を指定
3. 各エージェントに明確なタスクと期待される出力を指示

タスク「{{task_name}}」の開発を開始します。

まず、開発開始前に確認すべき事項を詳細に整理してください。
以下のファイルを読み込んで、設計とタスク内容を確認してください：
- `.claude/tasks/{{task_name}}/design.md`
- `.claude/tasks/{{task_name}}/todo.md`

**重要**: todo.mdの内容を読み込んだ後、develop-result.mdを以下の手順で初期化してください：
1. todo.mdからタスクリストを抽出
2. develop-result.mdにシンプルなチェックリスト形式で記載（タスク名のみ）
3. 開発開始日時を記録
4. 各タスク実装完了時に、該当タスクのチェックボックスを [ ] から [x] に更新

## 開発方針
1. **段階的実装**: ToDoリストの順序に従って一つずつ実装
2. **品質重視**: 可読性・保守性・テスタビリティを考慮
3. **既存コード尊重**: 既存のコーディング規約・パターンに従う
4. **適切なテスト**: 単体テスト・結合テストを含める
5. **進捗報告**: 各タスク完了時に進捗を報告

## 実装手順
ToDoリストの最初のタスクから順番に実装していきます。各タスク実装時は以下のエージェントフローに従ってください：

### エージェント実行フロー
1. **開発エージェント (develop)** を起動してタスクを実装
2. **確認エージェント (confirm)** を起動して実装内容と設計書の整合性を確認
3. 必要に応じて **テストエージェント (test)** を起動してテストを実行
4. 必要に応じて **ドキュメントエージェント (document)** を起動してドキュメントを更新

各タスク完了時に：
- 実装内容の説明
- 作成・修正したファイルの確認
- develop-result.mdのチェックリストを更新（完了したタスクに [x] マークを付ける）
- 次のタスクへの進行確認

実装を開始してください。何か質問や確認事項があれば、いつでもお聞かせください。

## ToDoリスト管理と開発完了時の報告書作成

### 実装開始時の準備
開発開始時に、`.claude/tasks/{{task_name}}/todo.md` の内容を読み込み、`.claude/tasks/{{task_name}}/develop-result.md` に以下の形式で初期化してください：

1. todo.md からタスクリストを抽出
2. develop-result.md にシンプルなチェックリスト形式でコピー
3. 各タスク完了時にチェックマーク [x] を追加

### 報告書テンプレート
```markdown
# 開発完了報告書

## プロジェクト概要
- タスク名: {{task_name}}
- 開発開始日時: [開始日時]
- 開発完了日時: [完了日時]

## タスク完了状況
### ToDoリスト（チェックリスト）
[todo.mdから抽出したタスクをチェックリスト形式で記載]
- [ ] タスク1: [タスク名]
- [ ] タスク2: [タスク名]
- [ ] タスク3: [タスク名]
...
（タスク完了時に [ ] を [x] に更新）

## 実装概要
[実装した機能の概要説明]

## 変更ファイル一覧
### 新規作成ファイル
- `[ファイルパス]`: [ファイルの役割説明]
- ...

### 修正ファイル
- `[ファイルパス]`: [修正内容の説明]
- ...

## 技術的な実装詳細
### アーキテクチャ
[実装したアーキテクチャの説明]

### 主要な技術要素
- [技術1]: [説明]
- [技術2]: [説明]
- ...

### データベース変更
[データベースに変更がある場合の説明]

## テスト実装
### テストカバレッジ
[実装したテストの説明]

### テスト種別
- 単体テスト: [説明]
- 結合テスト: [説明]
- その他: [説明]

## パフォーマンスとセキュリティ
### パフォーマンス考慮事項
[パフォーマンスに関する実装の説明]

### セキュリティ考慮事項
[セキュリティに関する実装の説明]

## 既知の課題・制限事項
[あれば記載]

## 今後の改善点
[あれば記載]

## 動作確認
[動作確認の結果]

## 補足事項
[その他の補足情報]
```

## 重要事項
日本語を含むMarkdownファイル（develop-result.mdを含む）を作成または編集した後は、必ずReadツールを使用してファイルの内容を確認し、文字化けが発生していないか確認してください。もし文字化けが見つかった場合は、自動的にWriteツールで正しい内容に修正してください。

全ての開発作業とdevelop-result.md作成が完了したら、「開発作業が完了しました。develop-result.mdに詳細な報告書を作成しました。」と表示してください。
